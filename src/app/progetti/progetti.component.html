<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-content">
            <div class="toolbar">
              <h4 class="card-title">PROGETTI</h4>
              <button mat-icon-button (click)="OpenEditProject()" class="edit-icon">
                <mat-icon >edit</mat-icon> 
              </button>
              <button mat-icon-button (click)="DeleteProject()" class="delete-icon">
                <mat-icon >delete</mat-icon>
              </button>
                         
              </div>
            <div class="div-table-content">

              <table id="example" class="table-data">
                <thead>
                  <tr>
                    <th><mat-checkbox [(ngModel)]="selectedAll" (change)="selectAll()"></mat-checkbox></th>
                    <th>Rif.</th>
                    <th>Titolo</th>
                    <th>Revenue</th>
                    <th>Perc. Completamento</th>
                    <th>Data inizio</th>
                    <th>Data fine</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let d of datas; let i=index">
                    <td><mat-checkbox  [(ngModel)]="d.isChecked" (change)="checkIfAllSelected()"></mat-checkbox></td>
                    <td>{{ d.id }}</td>
                    <td>{{ d.title }}</td>
                    <td>{{ d.revenue }} â‚¬</td>
                    <td>{{ ProgressPerc(d) }}%</td>
                    <td>{{ d.datestart }}</td>
                    <td>{{ d.dateend }}</td>
                    <hr />
                  </tr>
                </tbody>
              </table> 


              <div  *ngIf="ready" >
            <div *ngFor="let w of MaxWeeksProject.weeks; let i=index">
                <tr>
                  <th>Settimana {{ i + 1 }}</th>
                  <th>{{ Sum() }}</th>
                </tr>
              </div>
            </div>
  <!-- 
               <div class="weeks-content">
                <div class="container-weeks-table" *ngFor="let d of datas; let k = index">
                  <div id="example1" class="table-weeks" *ngFor="let w of d.weeks; let i= index">
                    <div *ngIf="k == 0">
                      <tr>
                        <td>
                          <input type="number" value="{{ w.ProgressPerc }}" [(ngModel)]="w.ProgressPercWeek"
                            class="perc" max=100 min=0 />
                        </td>
                        <td class="revenue-week">
                          {{ PartialRevenue(d) }}
                        </td>
                        <hr/>
                      </tr>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="main-content over" *ngIf="flagAperta">
  <div class="card cooplatModal">
    <div class="card-header"></div>
    <div class="card-content">
      <div class="col-md-3">
        <button (click)="back()" class="btn btn-fill btn-default">
          Chiudi
        </button>
      </div>
    </div>
  </div>
</div>

<div class="main-content over" *ngIf="flagApertaAddProject">
  <div class="card card1 cooplatModal">
    <div class="card-header"></div>
    <div class="card-content">
      <form #f="ngForm" (ngSubmit)="onSubmit(f)">
      <div class="col-md-4">
        <label>Titolo</label>
        <input id="title" type="text" [(ngModel)]="newData.title" />
      </div>
      <div class="col-md-4">
        <label>Revenue</label>
        <input id="revenue" type="number" [(ngModel)]="newData.revenue" />
      </div>
      <div class="col-md-4">
        <label>Data inizio</label>
        <input id="datestart" type="date" [(ngModel)]="newData.dateStart" />
      </div>
      <div class="col-md-4">
        <label>Data fine</label>
        <input type="date" id="dateend" [(ngModel)]="newData.dateEnd" />
      </div>
      <div class="col-md-4 buttonModal">
        <button (click)="AddProject()" class="btn btn-fill btn-defaultv">
          Aggiungi Progetto
        </button>
        <button (click)="back()" class="btn btn-fill btn-default">
          Annulla
        </button>
      </div>
    </form>
    </div>
  </div>
</div>


<div class="main-content over" *ngIf="flagApertaEditProject">
  <div class="card card1 cooplatModal">
    <div class="card-header"></div>
    <div class="card-content">
      <form #f="ngForm" (ngSubmit)="onSubmit(f)">
      <div class="col-md-4">
        <label>Titolo</label>
        <input id="title" type="text" [(ngModel)]="newData.title" />
      </div>
      <div class="col-md-4">
        <label>Revenue</label>
        <input id="revenue" type="number" [(ngModel)]="newData.revenue" />
      </div>
      <div class="col-md-4">
        <label>Data inizio</label>
        <input id="datestart" type="date" [(ngModel)]="newData.dateStart" />
      </div>
      <div class="col-md-4">
        <label>Data fine</label>
        <input type="date" id="dateend" [(ngModel)]="newData.dateEnd" />
      </div>
      <div class="col-md-4 buttonModal">
        <button (click)="EditProject()" class="btn btn-fill btn-defaultv">
          Aggiorna Progetto
        </button>
        <button (click)="back()" class="btn btn-fill btn-default">
          Annulla
        </button>
      </div>
    </form>
    </div>
  </div>
</div>




<div class="dropup-content">
  <button class="button buttonAddProject" (click)="OpenAddProject()">+</button>
  <button class="button buttonAddWeek" (click)="AddWeek()">+</button>
</div>